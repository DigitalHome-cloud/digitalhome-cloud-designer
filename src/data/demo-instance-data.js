/**
 * Demo instance data for the Builder tab.
 * Used as fallback when the GraphQL backend is not yet deployed.
 * Each demo SmartHome ID maps to a set of SmartHomeNodes + CatalogItems.
 */

export const DEMO_CATALOG_ITEMS = [
  {
    id: "cat-light-hue-white",
    sku: "HUE-WHITE-A60",
    brand: "Philips Hue",
    model: "White A60 E27",
    category: "light",
    description: "Smart LED bulb, dimmable, 800 lm",
    specs: JSON.stringify({ lumens: 800, wattage: 9, protocol: "Zigbee" }),
    imageUrl: null,
    designView: "electrical",
  },
  {
    id: "cat-light-hue-color",
    sku: "HUE-COLOR-A60",
    brand: "Philips Hue",
    model: "White & Color Ambiance A60",
    category: "light",
    description: "Smart LED bulb, 16M colors, 800 lm",
    specs: JSON.stringify({ lumens: 800, wattage: 9, protocol: "Zigbee" }),
    imageUrl: null,
    designView: "electrical",
  },
  {
    id: "cat-switch-shelly-1",
    sku: "SHELLY-1-GEN3",
    brand: "Shelly",
    model: "1 Gen3",
    category: "switch",
    description: "WiFi smart relay, 16A, DIN rail",
    specs: JSON.stringify({ maxLoad: "16A", protocol: "WiFi", voltage: "230V" }),
    imageUrl: null,
    designView: "electrical",
  },
  {
    id: "cat-socket-eve-energy",
    sku: "EVE-ENERGY-EU",
    brand: "Eve",
    model: "Energy (EU)",
    category: "socket",
    description: "Smart plug with energy monitoring",
    specs: JSON.stringify({ maxLoad: "11A", protocol: "Thread", monitoring: true }),
    imageUrl: null,
    designView: "electrical",
  },
  {
    id: "cat-sensor-aqara-temp",
    sku: "AQARA-TH-S1",
    brand: "Aqara",
    model: "Temperature & Humidity Sensor",
    category: "sensor",
    description: "Zigbee temperature and humidity sensor",
    specs: JSON.stringify({ protocol: "Zigbee", battery: "CR2032" }),
    imageUrl: null,
    designView: "automation",
  },
  {
    id: "cat-radiator-tado-v3",
    sku: "TADO-SRT-V3",
    brand: "Tado",
    model: "Smart Radiator Thermostat V3+",
    category: "radiator",
    description: "Smart TRV with geofencing",
    specs: JSON.stringify({ protocol: "Zigbee", battery: "2xAA" }),
    imageUrl: null,
    designView: "heating",
  },
  {
    id: "cat-boiler-viessmann",
    sku: "VIES-200W-19",
    brand: "Viessmann",
    model: "Vitodens 200-W 19kW",
    category: "boiler",
    description: "Gas condensing boiler, modulating",
    specs: JSON.stringify({ power: "19kW", efficiency: "98%", type: "gas" }),
    imageUrl: null,
    designView: "heating",
  },
];

/**
 * Build demo nodes for a given SmartHome ID.
 * Returns { nodes, catalogItems } ready for the Builder tab.
 */
export function getDemoData(smartHomeId) {
  // All demo SmartHomes get the same example topology
  const prefix = smartHomeId;

  const nodes = [
    // Spatial hierarchy
    {
      id: `${prefix}-building`,
      smartHomeId,
      nodeId: "Building",
      nodeType: "Building",
      label: "Main Building",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ floors: 2, yearBuilt: 2020 }),
      parentNodeId: null,
      linkType: null,
    },
    {
      id: `${prefix}-floor-gf`,
      smartHomeId,
      nodeId: "Floor_GF",
      nodeType: "Floor",
      label: "Ground Floor",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ level: 0 }),
      parentNodeId: `${prefix}-building`,
      linkType: "hasFloor",
    },
    {
      id: `${prefix}-floor-1f`,
      smartHomeId,
      nodeId: "Floor_1F",
      nodeType: "Floor",
      label: "First Floor",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ level: 1 }),
      parentNodeId: `${prefix}-building`,
      linkType: "hasFloor",
    },
    {
      id: `${prefix}-lr`,
      smartHomeId,
      nodeId: "LivingRoom",
      nodeType: "Space",
      label: "Living Room",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ areaM2: 35 }),
      parentNodeId: `${prefix}-floor-gf`,
      linkType: "hasSpace",
    },
    {
      id: `${prefix}-kitchen`,
      smartHomeId,
      nodeId: "Kitchen",
      nodeType: "Space",
      label: "Kitchen",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ areaM2: 18 }),
      parentNodeId: `${prefix}-floor-gf`,
      linkType: "hasSpace",
    },
    {
      id: `${prefix}-bedroom`,
      smartHomeId,
      nodeId: "Bedroom",
      nodeType: "Space",
      label: "Master Bedroom",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ areaM2: 22 }),
      parentNodeId: `${prefix}-floor-1f`,
      linkType: "hasSpace",
    },
    {
      id: `${prefix}-bath`,
      smartHomeId,
      nodeId: "Bathroom",
      nodeType: "Space",
      label: "Bathroom",
      designView: "spatial",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ areaM2: 9 }),
      parentNodeId: `${prefix}-floor-1f`,
      linkType: "hasSpace",
    },

    // Electrical â€” circuits & equipment
    {
      id: `${prefix}-circuit-light`,
      smartHomeId,
      nodeId: "Circuit_Lighting",
      nodeType: "Circuit",
      label: "Lighting Circuit",
      designView: "electrical",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ breakerA: 10 }),
      parentNodeId: null,
      linkType: null,
    },
    {
      id: `${prefix}-lr-light1`,
      smartHomeId,
      nodeId: "LR_Light1",
      nodeType: "Light",
      label: "LR Ceiling Light",
      designView: "electrical",
      catalogItemId: "cat-light-hue-color",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-light-hue-color"),
      properties: null,
      parentNodeId: `${prefix}-circuit-light`,
      linkType: "feedsEquipment",
    },
    {
      id: `${prefix}-kitchen-light1`,
      smartHomeId,
      nodeId: "Kitchen_Light1",
      nodeType: "Light",
      label: "Kitchen Light",
      designView: "electrical",
      catalogItemId: "cat-light-hue-white",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-light-hue-white"),
      properties: null,
      parentNodeId: `${prefix}-circuit-light`,
      linkType: "feedsEquipment",
    },
    {
      id: `${prefix}-bedroom-light1`,
      smartHomeId,
      nodeId: "Bedroom_Light1",
      nodeType: "Light",
      label: "Bedroom Light",
      designView: "electrical",
      catalogItemId: "cat-light-hue-white",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-light-hue-white"),
      properties: null,
      parentNodeId: `${prefix}-circuit-light`,
      linkType: "feedsEquipment",
    },
    {
      id: `${prefix}-circuit-sockets`,
      smartHomeId,
      nodeId: "Circuit_Sockets",
      nodeType: "Circuit",
      label: "Socket Circuit",
      designView: "electrical",
      catalogItemId: null,
      catalogItem: null,
      properties: JSON.stringify({ breakerA: 16 }),
      parentNodeId: null,
      linkType: null,
    },
    {
      id: `${prefix}-lr-socket1`,
      smartHomeId,
      nodeId: "LR_Socket1",
      nodeType: "Socket",
      label: "LR Smart Plug",
      designView: "electrical",
      catalogItemId: "cat-socket-eve-energy",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-socket-eve-energy"),
      properties: null,
      parentNodeId: `${prefix}-circuit-sockets`,
      linkType: "feedsEquipment",
    },
    {
      id: `${prefix}-lr-switch1`,
      smartHomeId,
      nodeId: "LR_Switch1",
      nodeType: "Switch",
      label: "LR Wall Switch",
      designView: "electrical",
      catalogItemId: "cat-switch-shelly-1",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-switch-shelly-1"),
      properties: null,
      parentNodeId: `${prefix}-circuit-sockets`,
      linkType: "feedsEquipment",
    },

    // Heating
    {
      id: `${prefix}-boiler`,
      smartHomeId,
      nodeId: "Boiler1",
      nodeType: "Heater",
      label: "Gas Boiler",
      designView: "heating",
      catalogItemId: "cat-boiler-viessmann",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-boiler-viessmann"),
      properties: JSON.stringify({ powerKW: 19 }),
      parentNodeId: null,
      linkType: null,
    },
    {
      id: `${prefix}-lr-radiator`,
      smartHomeId,
      nodeId: "LR_Radiator",
      nodeType: "Heater",
      label: "LR Radiator",
      designView: "heating",
      catalogItemId: "cat-radiator-tado-v3",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-radiator-tado-v3"),
      properties: null,
      parentNodeId: `${prefix}-boiler`,
      linkType: "feedsEquipment",
    },
    {
      id: `${prefix}-bedroom-radiator`,
      smartHomeId,
      nodeId: "Bedroom_Radiator",
      nodeType: "Heater",
      label: "Bedroom Radiator",
      designView: "heating",
      catalogItemId: "cat-radiator-tado-v3",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-radiator-tado-v3"),
      properties: null,
      parentNodeId: `${prefix}-boiler`,
      linkType: "feedsEquipment",
    },

    // Automation
    {
      id: `${prefix}-lr-sensor`,
      smartHomeId,
      nodeId: "LR_TempSensor",
      nodeType: "Sensor",
      label: "LR Temp Sensor",
      designView: "automation",
      catalogItemId: "cat-sensor-aqara-temp",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-sensor-aqara-temp"),
      properties: null,
      parentNodeId: null,
      linkType: null,
    },
    {
      id: `${prefix}-bedroom-sensor`,
      smartHomeId,
      nodeId: "Bedroom_TempSensor",
      nodeType: "Sensor",
      label: "Bedroom Temp Sensor",
      designView: "automation",
      catalogItemId: "cat-sensor-aqara-temp",
      catalogItem: DEMO_CATALOG_ITEMS.find((c) => c.id === "cat-sensor-aqara-temp"),
      properties: null,
      parentNodeId: null,
      linkType: null,
    },
  ];

  return { nodes, catalogItems: DEMO_CATALOG_ITEMS };
}
